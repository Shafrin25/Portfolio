<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Handwriting Section â€“ Permanent Freeze</title>

<link href="https://fonts.googleapis.com/css2?family=Gloria+Hallelujah&display=swap" rel="stylesheet">

<style>
*{ box-sizing:border-box; }

body{
  margin:0;
  padding:0;
  background:#000;
  font-family:"Comic Sans MS","Comic Sans","Gloria Hallelujah",cursive;
}

/* SECTION */
.about-section{
  position:relative;
  min-height:100vh;
  overflow:hidden;
  background:
    linear-gradient(rgba(0,0,0,0.75), rgba(0,0,0,0.75)),
    url('image.jpeg') center/cover no-repeat;
}

/* TEXT */
.handwriting{
  font-size:1.6rem;
  color:#fc9fb6;
  line-height:1.8;
  text-align:center;
  margin:0;
}

/* EDITABLE */
.editable{
  position:absolute;
  cursor:move;
  user-select:none;
  transform-origin:center center;
}

.editable img{
  width:100%;
  display:block;
}

/* TEXT ABOVE */
.text-box{ z-index:20; }

/* HANDLES */
.resize-handle{
  position:absolute;
  width:14px;
  height:14px;
  background:#fff;
  border:2px solid #000;
  right:-8px;
  bottom:-8px;
  cursor:se-resize;
}

.rotate-handle{
  position:absolute;
  top:-28px;
  left:50%;
  transform:translateX(-50%);
  width:16px;
  height:16px;
  background:#38bdf8;
  border-radius:50%;
  border:2px solid #000;
  cursor:grab;
}

/* FREEZE BUTTON */
.freeze-btn{
  position:fixed;
  top:20px;
  right:20px;
  padding:10px 18px;
  border:none;
  border-radius:10px;
  background:#22c55e;
  font-weight:bold;
  cursor:pointer;
  z-index:9999;
}

/* ================= ANIMATION (UNCHANGED) ================= */
@keyframes girlsHorizontalLoop{
  from{ transform:translateX(0); }
  to{ transform:translateX(45px); }
}

.girls-horizontal-loop img{
  animation:girlsHorizontalLoop 3s linear infinite;
}
</style>
</head>

<body>

<button class="freeze-btn" onclick="freezeLayout()">FREEZE</button>

<section class="about-section">

  <!-- TEXT -->
  <div class="editable text-box" data-id="about-text"
       style="left:50%; top:40%; width:700px; transform:translate(-50%,-50%);">
    <p class="handwriting" contenteditable="true">
      When I'm not coding or designing, you'll probably find me drawing,
      crafting, or dreaming up new product ideas. I believe in working
      with curiosity, collaborating with kindness, and always adding
      a touch of imagination to everything I do.
    </p>
    <div class="resize-handle"></div>
    <div class="rotate-handle"></div>
  </div>

  <!-- girls.png -->
  <div class="editable girls-horizontal-loop" data-id="girls1"
       style="left:80px; top:120px; width:220px;">
    <img src="girls.png">
    <div class="resize-handle"></div>
    <div class="rotate-handle"></div>
  </div>

  <!-- girlb.png -->
  <div class="editable" data-id="girls2"
       style="right:100px; top:160px; width:240px;">
    <img src="girlb.png">
    <div class="resize-handle"></div>
    <div class="rotate-handle"></div>
  </div>

  <!-- image3 -->
  <div class="editable" data-id="img3"
       style="left:120px; bottom:100px; width:200px;">
    <img src="image3.png">
    <div class="resize-handle"></div>
    <div class="rotate-handle"></div>
  </div>

  <!-- RESUME -->
  <a href="resume.pdf" target="_blank">
    <div class="editable" data-id="resume"
         style="right:120px; bottom:80px; width:160px;">
      <img src="Click Me Resume.png">
      <div class="resize-handle"></div>
      <div class="rotate-handle"></div>
    </div>
  </a>

</section>

<script>
const items = document.querySelectorAll('.editable');
const frozen = localStorage.getItem('aboutFrozen');

/* ===== LOAD SAVED ===== */
items.forEach(el=>{
  const id = el.dataset.id;
  const saved = JSON.parse(localStorage.getItem(id));
  if(saved){
    Object.assign(el.style, saved.style);
    el.dataset.rotate = saved.rotate || 0;
    el.style.transform = `rotate(${el.dataset.rotate}deg)`;
    if(saved.text && el.querySelector('p')){
      el.querySelector('p').innerHTML = saved.text;
    }
  }
});

/* ===== RESTORE FREEZE ===== */
if(frozen){
  items.forEach(el=>{
    el.style.pointerEvents = 'none';
    el.querySelectorAll('.resize-handle,.rotate-handle').forEach(h=>h.remove());
  });
  document.querySelector('.freeze-btn')?.remove();
}

/* ===== EDITOR LOGIC ===== */
let active=null,startX,startY,startW,startH,startL,startT,startAngle;

items.forEach(el=>{
  const resize=el.querySelector('.resize-handle');
  const rotate=el.querySelector('.rotate-handle');

  el.addEventListener('mousedown',e=>{
    if(frozen || e.target===resize || e.target===rotate) return;
    active={el,type:'drag'};
    startX=e.clientX; startY=e.clientY;
    startL=el.offsetLeft; startT=el.offsetTop;
  });

  resize.addEventListener('mousedown',e=>{
    if(frozen) return;
    e.stopPropagation();
    active={el,type:'resize'};
    startX=e.clientX; startY=e.clientY;
    startW=el.offsetWidth; startH=el.offsetHeight;
  });

  rotate.addEventListener('mousedown',e=>{
    if(frozen) return;
    e.stopPropagation();
    active={el,type:'rotate'};
    const r=el.getBoundingClientRect();
    startAngle=Math.atan2(
      e.clientY-(r.top+r.height/2),
      e.clientX-(r.left+r.width/2)
    )*180/Math.PI;
  });
});

document.addEventListener('mousemove',e=>{
  if(!active) return;
  const el=active.el;

  if(active.type==='drag'){
    el.style.left=startL+(e.clientX-startX)+'px';
    el.style.top=startT+(e.clientY-startY)+'px';
  }
  if(active.type==='resize'){
    el.style.width=startW+(e.clientX-startX)+'px';
    el.style.height=startH+(e.clientY-startY)+'px';
  }
  if(active.type==='rotate'){
    const r=el.getBoundingClientRect();
    const ang=Math.atan2(
      e.clientY-(r.top+r.height/2),
      e.clientX-(r.left+r.width/2)
    )*180/Math.PI;
    el.dataset.rotate=ang-startAngle;
    el.style.transform=`rotate(${el.dataset.rotate}deg)`;
  }
});

document.addEventListener('mouseup',()=>{
  if(!active) return;
  const el=active.el;

  localStorage.setItem(el.dataset.id,JSON.stringify({
    style:{
      top:el.style.top,
      left:el.style.left,
      right:el.style.right,
      bottom:el.style.bottom,
      width:el.style.width,
      height:el.style.height
    },
    rotate:el.dataset.rotate,
    text:el.querySelector('p')?el.querySelector('p').innerHTML:null
  }));
  active=null;
});

/* ===== FREEZE ===== */
function freezeLayout(){
  localStorage.setItem('aboutFrozen','true');
  items.forEach(el=>{
    el.style.pointerEvents='none';
    el.querySelectorAll('.resize-handle,.rotate-handle').forEach(h=>h.remove());
  });
  document.querySelector('.freeze-btn').remove();
}
</script>

</body>
</html>
